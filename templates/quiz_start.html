{% extends "base.html" %}
{% block title %}Mode EntraÃ®nement{% endblock %}

{% block content %}
  <h1 style="text-align:center; margin-top: 20px;">Mode entraÃ®nement</h1>

  <div class="quiz-content-block" style="width: 100%; box-sizing: border-box;">

    {% if paused_session %}
      <!-- ğŸŸ£ Carte 1 â€“ Session en pause -->
        <div class="answer-card" style="flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; text-align: center;">

          <!-- ğŸ”¹ Titre avec date et heure -->
          <div style="font-size: 1.15em; font-weight: 700; margin-bottom: 6px;">
            Session d'entraÃ®nement nÂ°{{ paused_session.id }} â€“ Niveau : {{ paused_session.difficulty_level }}
          </div>
          <div style="color: #6b7280; font-size: 0.95em; margin-bottom: 14px;">
            Mise en pause le {{ paused_session.paused_at.strftime('%d/%m/%Y Ã  %H:%M') if paused_session.paused_at else 'â€”' }}
          </div>
        
          <!-- ğŸŸ£ Bloc complet avec fond lavande -->
          <div class="session-score-inline" style="display: inline-flex; flex-direction: column; align-items: center; gap: 4px; padding: 12px 16px; width: fit-content; text-align: center; margin-bottom: 18px;">
            <div style="font-size: 1.1em; font-weight: 700;">
              Score : {{ score_percent or 0 }}%
            </div>
            <div style="font-size: 0.87em;">
              {{ score_correct }} âœ… & {{ score_wrong }} âŒ
            </div>
            <div style="font-size: 1.0em; margin-top: 2px; white-space: nowrap;">
              {% for result in last_answers %}
                {% if result == 'correct' %}ğŸŸ¢
                {% elif result == 'wrong' %}ğŸ”´
                {% else %}âšª
                {% endif %}
              {% endfor %}
              ... âŒ›
            </div>
          </div>



        
          <!-- ğŸ” Bouton reprendre -->
          <a href="/quiz/session/{{ paused_session.id }}" style="text-decoration: none; margin-top: 18px;">
            <button class="btn btn-primary">â–¶ï¸ Reprendre la session</button>
          </a>
        </div>


      <!-- Ligne OU -->
      <div style="text-align:center; margin: 22px 0; font-weight:600;">â€” OU â€”</div>
    {% endif %}

    <!-- ğŸŸ¢ Carte 2 â€“ Nouvelle session -->
    <div class="answer-card" style="flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; text-align: center;">
    
      <!-- ğŸ”¹ Titre -->
      <div style="font-size: 1.15em; font-weight: 700; margin-bottom: 14px;">
        Commencez un nouvel entraÃ®nement
      </div>
    
      <!-- ğŸšï¸ Formulaire niveau -->
      <form method="get" action="/quiz/start" style="text-align: center; width: 100%;">
      
        <!-- Ligne niveau -->
        <div style="display: flex; justify-content: center; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 16px;">
          <label for="difficulty" style="font-weight: 600;">Choix du niveau :</label>
          <select name="level" id="difficulty" style="padding: 8px 14px; font-size: 1em; border-radius: 6px;">
            <option value="0">Tous niveaux</option>
            <option value="1">Niveau 1 - Facile</option>
            <option value="2">Niveau 2 - Moyen</option>
            <option value="3">Niveau 3 - Difficile</option>
          </select>
        </div>
      
        <!-- Bouton en dessous -->
        <button class="btn-primary" type="submit">âœ¨ Nouvelle session</button>
      </form>
    
      <!-- âš ï¸ Alerte si session en pause -->
      {% if paused_session %}
        <div style="margin-top: 14px; font-size: 0.95em; color: #7c3aed;">
          âš ï¸ Si vous dÃ©marrez une nouvelle session, celle en pause sera perdue.
        </div>
      {% endif %}
      
    </div>

    
  </div>
{% endblock %}
